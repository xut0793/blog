# npx 包运行命令

npx 是一种在 npm 中的安装工具，Node 自带 npm 模块，在 npm 5.2.0 的时候发现会买一送一，自动安装了 npx，所以可以直接使用 npx 命令。

那么它解决了什么问题？

在以前，我们很多 cli 工具都是需要全局安装，然后才可以在命令行窗口直接使用。比如全局安装`npm i -g typescript`后可以直接使用`tsc`命令。

但是全局安装占用空间，并且很多时候我们只是使用一次，并不需要全局安装，或者很多全局安装后很少使用。另外在团队协作中还有版本不一致的问题。

另外，如果我们本地项目安装了某些工具模块，如果想使用命令行运行一次查看，我们要像如下一样输入一长串命令：

```bash
node-modules/.bin/tsc --version
```

或者在 package.json 的 script 字段配置一条命令：

```json
"script": {
    "tsc":"tsc"
}
```

所以在以前如果想用某个模块自带的命令，只能有两种办法：

-   全局安装使用
-   输入一长串路径命令：如`node-modules/.bin/tsc --version`

那 npx 就是能解决以上两个问题，并且如果都没安装某个模块，想想临时使用它的命令，npx 也会帮你临时下载使用。

**语法：**

```
npx <command>
```

使用 npx 时，它会做以下事件：

-   会到当前目录下的 node_modules/.bin 路径查找命令，如果没有就到环境变量\$PATH 里面查找全局命令，检查命令是否存在，存在就使用。
-   没找到就临时下载最新版本到一个临时目录，完成命令要求，使用完之后不会在你的本机或者项目留下任何东西。

**参数：**

```
--no-install      强制使用本地模块
--ignore-existing 强制下载远程模块
```

如果想让 npx 强制使用本地模块，不下载远程模块，可以使用--no-install 参数。如果本地不存在该模块，就会报错。

```bash
$ npx --no-install tsc
```

反过来，如果忽略本地的同名模块，强制安装使用远程模块，可以使用--ignore-existing 参数。比如，本地已经全局安装了 create-react-app，但还是想使用远程模块，就用这个参数。

```bash
$ npx --ignore-existing tsc
```

**参考链接：**

[阮一峰：npx 使用教程](http://www.ruanyifeng.com/blog/2019/02/npx.html)
